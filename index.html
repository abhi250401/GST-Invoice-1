<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GST Invoice</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* ===== MOBILE ONLY – HARD GUARANTEES ===== */
* {
    box-sizing: border-box;
    max-width: 100%;
}

body {
    margin: 0;
    padding: 10px;
    font-family: system-ui, -apple-system, Segoe UI, Arial, sans-serif;
    background: #f2f2f2;
    font-size: 14px;
}

.container {
    width: 100%;
    background: #fff;
    border: 1px solid #000;
    margin-bottom: 14px;
    overflow-x: hidden;
}

.section {
    padding: 12px;
    border-bottom: 1px solid #000;
}

h2 {
    font-size: 15px;
    margin: 0 0 8px;
    padding-bottom: 4px;
    border-bottom: 1px solid #000;
}

label {
    font-weight: 600;
    font-size: 13px;
    display: block;
    margin-bottom: 4px;
}

input {
    width: 100%;
    padding: 10px;
    border: 1px solid #999;
    font-size: 14px;
    margin-bottom: 10px;
}

table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed; /* IMPORTANT */
    font-size: 13px;
}

th, td {
    border: 1px solid #000;
    padding: 6px;
    word-wrap: break-word;
}

th {
    background: #eaeaea;
}

button {
    width: 100%;
    padding: 12px;
    background: #1a237e;
    color: #fff;
    border: none;
    font-weight: 600;
    font-size: 14px;
    margin-top: 8px;
}

button.secondary {
    background: #444;
}

.text-right { text-align: right; }
.text-center { text-align: center; }

.hide { display: none; }

@media print {
    body { background: #fff; padding: 0; }
    .form, .actions { display: none; }
}
</style>
</head>

<body>

<!-- ================= FORM ================= -->
<div class="container form">

<div class="section">
<h2>Seller Details</h2>

<label>Seller Name</label>
<input id="sName" value="POONAM ENTERPRISES">

<label>GSTIN</label>
<input id="sGstin" value="24HDE7487RE5RT4">

<label>Address</label>
<input id="sAddr" value="E-251/C, Shyam Vihar, Najafgarh, Delhi-43">

<label>Bank Details</label>
<input id="sBank" value="SBI | A/C 2000000004512 | IFSC SBIN0000488">
</div>

<div class="section">
<h2>Buyer Details</h2>

<label>Buyer Name</label>
<input id="bName">

<label>Phone</label>
<input id="bPhone">

<label>Address</label>
<input id="bAddr">

<label>GSTIN</label>
<input id="bGstin">
</div>

<div class="section">
<h2>Products</h2>

<table>
<thead>
<tr>
<th>Description</th>
<th>HSN</th>
<th>Qty</th>
<th>Rate</th>
<th>GST%</th>
<th></th>
</tr>
</thead>
<tbody id="prodBody"></tbody>
</table>

<button onclick="addRow()">+ Add Product</button>
</div>

<div class="section actions">
<button onclick="generate()">Generate Invoice</button>
</div>
</div>

<!-- ================= INVOICE ================= -->
<div class="container hide" id="invoice">

<div class="section text-center">
<h2>TAX INVOICE</h2>
<div id="meta"></div>
</div>

<div class="section">
<b>Seller</b><br>
<span id="isName"></span><br>
<span id="isAddr"></span><br>
GSTIN: <span id="isGstin"></span>
</div>

<div class="section">
<b>Buyer</b><br>
<span id="ibName"></span><br>
<span id="ibAddr"></span><br>
Phone: <span id="ibPhone"></span><br>
GSTIN: <span id="ibGstin"></span>
</div>

<div class="section">
<table>
<thead>
<tr>
<th>#</th>
<th>Description</th>
<th>Qty</th>
<th>Taxable</th>
<th>CGST</th>
<th>SGST</th>
<th>Total</th>
</tr>
</thead>
<tbody id="invRows"></tbody>
</table>
</div>

<div class="section">
<b>Totals</b><br>
Taxable: ₹ <span id="tTaxable"></span><br>
CGST: ₹ <span id="tCgst"></span><br>
SGST: ₹ <span id="tSgst"></span><br>
<b>Grand Total: ₹ <span id="tGrand"></span></b>
</div>

<div class="section">
<b>Bank Details</b><br>
<span id="isBank"></span>
</div>

<div class="section actions">
<button onclick="window.print()">Print / Save PDF</button>
<button class="secondary" onclick="location.reload()">Back</button>
</div>

</div>

<script>
function addRow() {
    prodBody.insertAdjacentHTML("beforeend", `
    <tr>
        <td><input></td>
        <td><input></td>
        <td><input type="number"></td>
        <td><input type="number"></td>
        <td><input type="number" value="18"></td>
        <td><button onclick="this.closest('tr').remove()">✕</button></td>
    </tr>`);
}
addRow();

function generate() {
    meta.innerText = "Invoice No: GST-" + Date.now().toString().slice(-6) +
                     " | Date: " + new Date().toLocaleDateString();

    isName.innerText = sName.value;
    isAddr.innerText = sAddr.value;
    isGstin.innerText = sGstin.value;
    isBank.innerText = sBank.value;

    ibName.innerText = bName.value;
    ibAddr.innerText = bAddr.value;
    ibPhone.innerText = bPhone.value;
    ibGstin.innerText = bGstin.value;

    let rows="", taxable=0, cgst=0, sgst=0, total=0;

    [...prodBody.rows].forEach((r,i)=>{
        let ixs = r.querySelectorAll("input");
        let q=+ixs[2].value||0, rate=+ixs[3].value||0, gst=+ixs[4].value||0;
        let t=q*rate, tax=t*gst/100, half=tax/2;

        rows+=`
        <tr>
            <td class="text-center">${i+1}</td>
            <td>${ixs[0].value}</td>
            <td class="text-center">${q}</td>
            <td class="text-right">${t.toFixed(2)}</td>
            <td class="text-right">${half.toFixed(2)}</td>
            <td class="text-right">${half.toFixed(2)}</td>
            <td class="text-right">${(t+tax).toFixed(2)}</td>
        </tr>`;

        taxable+=t; cgst+=half; sgst+=half; total+=t+tax;
    });

    invRows.innerHTML = rows;
    tTaxable.innerText = taxable.toFixed(2);
    tCgst.innerText = cgst.toFixed(2);
    tSgst.innerText = sgst.toFixed(2);
    tGrand.innerText = total.toFixed(2);

    document.querySelector(".form").classList.add("hide");
    invoice.classList.remove("hide");
}
</script>

</body>
</html>
